<%-- 
    Document   : settingsSNSAngelGuard_Vigilants
    Created on : 31-mar-2011, 23:00:34
    Author     : tote
--%>

<%@page import="java.net.URLDecoder"%>
<%@page import="es.uah.cc.ie.sources.SNSdataBaseIntegrator"%>
<%@page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>

<%
            //Obtenemos la conexión a Facebook
            SNSdataBaseIntegrator snsDB = SNSdataBaseIntegrator.getSessionInstance(request);
            snsDB.logSession(request, response);
            //snsDB.getLoginFacebook(request, response);
            System.out.println("STTSNSAVG: OBJETO ID: " + snsDB.getUserSettings().getUid());
            snsDB.setInicio(false);

            String titleFbList = snsDB.getLocaleSettings().getTitleFbListSettAng();
            String titleAngelSettAng = snsDB.getLocaleSettings().getSubTitleAngelSettAng();

            String hdAngels = URLDecoder.decode(request.getParameter("hdAngels"),"ISO-8859-1");
            System.out.println("ANTES CONVERSION: " + request.getParameter("hdAngelsEd"));
            String hdAngelsEd = URLDecoder.decode(request.getParameter("hdAngelsEd"),"ISO-8859-1");
            System.out.println("DESPUES CONVERSION: " + hdAngelsEd);
            String hdAngelsGoogleSelected = URLDecoder.decode(request.getParameter("hdAngelsGoogleSelected"),"ISO-8859-1");
            String hdLstAngelsFltWall = URLDecoder.decode(request.getParameter("hdLstAngelsFltWall"),"ISO-8859-1");
            String hdLstAngelsFltFriends = URLDecoder.decode(request.getParameter("hdLstAngelsFltFriends"),"ISO-8859-1");
            String hdLstAngelsFltPriv = URLDecoder.decode(request.getParameter("hdLstAngelsFltPriv"),"ISO-8859-1");
            String hdLstAngelsFltVist = URLDecoder.decode(request.getParameter("hdLstAngelsFltVist"),"ISO-8859-1");
            String hdActiveFltWall = URLDecoder.decode(request.getParameter("hdActiveFltWall"),"ISO-8859-1");
            String hdActiveFltFriends = URLDecoder.decode(request.getParameter("hdActiveFltFriends"),"ISO-8859-1");
            String hdActiveFltPriv = URLDecoder.decode(request.getParameter("hdActiveFltPriv"),"ISO-8859-1");
            String hdActiveFltVist = URLDecoder.decode(request.getParameter("hdActiveFltVist"),"ISO-8859-1");
            String hdFrecFltWall = URLDecoder.decode(request.getParameter("hdFrecFltWall"),"ISO-8859-1");
            String hdFrecFltFriends = URLDecoder.decode(request.getParameter("hdFrecFltFriends"),"ISO-8859-1");
            String hdFrecFltPriv = URLDecoder.decode(request.getParameter("hdFrecFltPriv"),"ISO-8859-1");
            String hdFrecFltVist = URLDecoder.decode(request.getParameter("hdFrecFltVist"),"ISO-8859-1");
            String hdAngelsAux = URLDecoder.decode(request.getParameter("hdAngelsAux"),"ISO-8859-1");

            snsDB.getAngelsSelected(hdAngels);
            snsDB.joinAngels(hdAngelsGoogleSelected,hdAngelsEd);
            String[][] arrayAngels = snsDB.getArrayAngelsSelected();

            for(int i=0;i<arrayAngels.length;i++){
                System.out.println("DATOS "+i+": " + arrayAngels[i][0] + "," + arrayAngels[i][1] + "," + arrayAngels[i][2]);
            }

            String[] arrayVig = snsDB.getLocaleSettings().stringToArray(snsDB.getLocaleSettings().getTitleVigSettVig());
            String[] arrayDes = snsDB.getLocaleSettings().stringToArray(snsDB.getLocaleSettings().getTitleVigDescriptionSettVig());
            String[] arrayFrc = snsDB.getLocaleSettings().stringToArray(snsDB.getLocaleSettings().getTitleVigFrecSelectSettVig());
%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"lang="es" xml:lang="es">
    <head>
        <title><%=snsDB.getLocaleSettings().getTitleSettVig()%></title>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />

        <link type="text/css" rel="stylesheet" href="Styles/facebook.css" />
        <link type="text/css" rel="stylesheet" href="Styles/smoothness/jquery-ui-1.8.12.custom.css" />
        <link type="text/css" rel="stylesheet" href="Styles/jquery.loader.css" />
        <link type="text/css" rel="stylesheet" href="Styles/fcbklistselection.css" />

        <script type="text/javascript" charset="ISO-8859-1" src="js/jquery-1.5.1.min.js"></script>
        <script type="text/javascript" charset="ISO-8859-1" src="js/jquery-ui-1.8.12.custom.min.js"></script>
        <script type="text/javascript" charset="ISO-8859-1" src="js/utilidadesFormularios.js"></script>
        <script type="text/javascript" charset="ISO-8859-1" src="js/AjaxFlagMenu-1.0.2.min.js"></script>
        <script type="text/javascript" charset="ISO-8859-1" src="js/jquery.loader.js"></script>
        <script type="text/javascript" charset="ISO-8859-1" src="js/fcbklistselectionVig.js"></script>

        <script type="text/javascript" >
          $(function() {
                loadInicioDates('<%= hdAngels%>','<%= hdAngelsEd%>','<%= hdAngelsGoogleSelected%>',
                    '<%= hdLstAngelsFltWall%>','<%= hdLstAngelsFltFriends%>','<%= hdLstAngelsFltPriv%>','<%= hdLstAngelsFltVist%>',
                    '<%= hdActiveFltWall%>','<%= hdActiveFltFriends%>','<%= hdActiveFltPriv%>','<%= hdActiveFltVist%>',
                    '<%= hdFrecFltWall%>','<%= hdFrecFltFriends%>','<%= hdFrecFltPriv%>','<%= hdFrecFltVist%>','<%= hdAngelsAux%>');

                loadTitleFcbList('<%= titleFbList%>','<%= titleAngelSettAng%>');
                setArrayAngels('<%= snsDB.arrayToString(arrayAngels)%>');
            });  

            $(function(){
                loadTitleFcbList('<%= titleFbList%>','<%= titleAngelSettAng%>');
                setArrayAngels('<%= snsDB.arrayToString(arrayAngels)%>');

                loadCheckFiltro('FltWall');
                loadCheckFiltro('FltFriends');
                loadCheckFiltro('FltPriv');
                loadCheckFiltro('FltVist');

                habilitarGuardar();
            });
        </script>

    </head>
    <body>
        <form id="frSNSVigilants" action="" method="">
            <input type="hidden" id="hdAngels" name="hdAngels" value="" />
            <input type="hidden" id="hdAngelsEd" name="hdTxtNameAngel" value="" />
            <input type="hidden" id="hdAngelsGoogleSelected" name="hdAngelsGoogleSelected" value="" />
            <input type="hidden" id="hdLstAngelsFltWall" name="hdLstAngelsFltWall" value="" />
            <input type="hidden" id="hdLstAngelsFltFriends" name="hdLstAngelsFltFriends" value="" />
            <input type="hidden" id="hdLstAngelsFltPriv" name="hdLstAngelsFltPriv" value="" />
            <input type="hidden" id="hdLstAngelsFltVist" name="hdLstAngelsFltVist" value="" />
            <input type="hidden" id="hdActiveFltWall" name="hdActiveFltWall" value="0" />
            <input type="hidden" id="hdActiveFltFriends" name="hdActiveFltFriends" value="0" />
            <input type="hidden" id="hdActiveFltPriv" name="hdActiveFltPriv" value="0" />
            <input type="hidden" id="hdActiveFltVist" name="hdActiveFltVist" value="0" />
            <input type="hidden" id="hdFrecFltWall" name="hdFrecFltWall" value="0" />
            <input type="hidden" id="hdFrecFltFriends" name="hdFrecFltFriends" value="0" />
            <input type="hidden" id="hdFrecFltPriv" name="hdFrecFltPriv" value="0" />
            <input type="hidden" id="hdFrecFltVist" name="hdFrecFltVist" value="0" />
            <input type="hidden" id="hdAngelsAux" name="hdAngelsAux" value="" />
            <input type="hidden" id="hdFiltroActual" name="hdFiltroActual" value="" />

            <!-- Variables de idioma  -->
            <input type="hidden" id="hdTitleFbList" name="hdTitleFbList" value="0" />
            <input type="hidden" id="hdTitleAngelSettAng" name="hdTitleAngelSettAng" value="0" />


            <div id="vigilants" class="vigilants">
                <h1 class="tituloMed"><%=snsDB.getLocaleSettings().getTitleSettVig()%></h1>
                <hr class="linea" />
                <table width="630px">
                    <tr>
                        <td>
                            <table width="170px">
                                <tr class="cabeceraVigilants">
                                    <td width="138px"><%=snsDB.getLocaleSettings().getTitleVigilantSettVig()%></td>
                                    <td width="15px">
                                        <input type="checkbox" id="chkAllFilters" name="chkAllFilters" value="chkAllFilters" 
                                               disabled="disabled" onclick=""/>
                                    </td>
                                    <td width="15px"></td>
                                </tr>
                            </table>
                            <div id="vigilantsContent" class="vigilantsContent">
                                <table>
                                    <tr id="vigilant0" class="pijama1">
                                        <td width="122px" style="cursor:pointer;" onclick="seleccionVig('vigilant0');cargarOpcionesFiltros('<%= arrayDes[1]%>','FltWall');habilitarCheck('chkVig0','FltWall');"><%= arrayVig[0]%></td>
                                        <td width="15px">
                                            <input type="checkbox" style="cursor:pointer;" id="chkVig0" name="chkVig0" value="chkVig0"
                                                   disabled="disabled" onclick="" />
                                        </td>
                                    </tr>
                                    <tr id="vigilant1" class="pijama1">
                                        <td width="122px" style="cursor:pointer;" onclick="seleccionVig('vigilant1');cargarOpcionesFiltros('<%= arrayDes[2]%>','FltFriends');habilitarCheck('chkVig1','FltFriends');"><%= arrayVig[1]%></td>
                                        <td width="15px">
                                            <input type="checkbox" style="cursor:pointer;" id="chkVig1" name="chkVig1" value="chkVig1"
                                                   disabled="disabled" onclick="" />
                                        </td>
                                    </tr>
                                    <tr id="vigilant2" class="pijama1">
                                        <td width="122px" style="cursor:pointer;" onclick="seleccionVig('vigilant2');cargarOpcionesFiltros('<%= arrayDes[3]%>','FltPriv');habilitarCheck('chkVig2','FltPriv');"><%= arrayVig[2]%></td>
                                        <td width="15px">
                                            <input type="checkbox" style="cursor:pointer;" id="chkVig2" name="chkVig2" value="chkVig2"
                                                   disabled="disabled" onclick="" />
                                        </td>
                                    </tr>
                                    <tr id="vigilant3" class="pijama1">
                                        <td width="122px" style="cursor:pointer;" onclick="seleccionVig('vigilant3');cargarOpcionesFiltros('<%= arrayDes[4]%>','FltVist');habilitarCheck('chkVig3','FltVist');"><%= arrayVig[3]%></td>
                                        <td width="15px">
                                            <input type="checkbox" style="cursor:pointer;" id="chkVig3" name="chkVig3" value="chkVig3"
                                                   disabled="disabled" onclick="" />
                                        </td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                    <tr class="pijama1">
                                        <td width="122px"</td>
                                        <td width="15px"></td>
                                    </tr>
                                </table>
                            </div>
                        </td>
                        <td>
                            <table width="350px">
                                <tr>
                                    <td>
                                        <h1 class="letraNorm"><%= arrayDes[0]%></h1>
                                        <div id="vigilantDescription" class="vigilantDescription">
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div id="vigilantFrec" class="vigilantFrec">
                                            <table width="100%">
                                                <tr>
                                                    <td width="60%" align="left">
                                                        <h1 class="letraNorm"><%=snsDB.getLocaleSettings().getTitleVigFrecSettVig()%> </h1>
                                                    </td>
                                                    <td width="40%" align="right">
                                                        <select id="slcFrecuency" disabled="disabled"
                                                                onchange="obtenerFrecuencia(this.id);">
                                                            <option value="0"><%= arrayFrc[0]%></option>
                                                            <option value="1"><%= arrayFrc[1]%></option>
                                                            <option value="2"><%= arrayFrc[2]%></option>
                                                            <option selected value="3"><%= arrayFrc[3]%></option>
                                                            <option value="4"><%= arrayFrc[4]%></option>
                                                            <option value="5"><%= arrayFrc[5]%></option>
                                                            <option value="6"><%= arrayFrc[6]%></option>
                                                        </select>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <h1 class="letraNorm"><%=snsDB.getLocaleSettings().getTitleVigAngSettVig()%></h1>
                                        <div id="vigilantAngels" class="vigilantAngels">
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </div>
        </form>
    </body>
</html>
